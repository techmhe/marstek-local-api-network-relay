{
  "config": {
    "abort": {
      "already_configured": "Device is already configured",
      "invalid_discovery_info": "Invalid discovery information received from the device",
      "reauth_successful": "Device reconnected successfully",
      "reconfigure_successful": "Device reconfigured successfully"
    },
    "error": {
      "cannot_connect": "Unable to connect to the device",
      "device_not_found": "Device not found at the specified IP address",
      "discovery_failed": "Failed to discover devices. Please check your network connection and try again.",
      "invalid_discovery_info": "Invalid discovery information received from the device",
      "all_devices_configured": "All discovered devices are already configured. Enter an IP address manually or ensure additional devices are on the network."
    },
    "step": {
      "user": {
        "data": {
          "device": "Select device"
        },
        "data_description": {
          "device": "Choose the Marstek device you want to add"
        },
        "description": "Select your Marstek energy storage device from the options below.{already_configured}",
        "title": "Marstek Energy Storage"
      },
      "manual": {
        "title": "Manual device setup",
        "description": "No devices were discovered automatically. Enter the IP address of your Marstek device manually. Make sure the device has Open API enabled in the Marstek app.",
        "data": {
          "host": "IP address",
          "port": "Port"
        },
        "data_description": {
          "host": "IP address of your Marstek device",
          "port": "UDP port (default: 30000)"
        }
      },
      "reauth_confirm": {
        "title": "Reconnect Marstek Device",
        "description": "The device at {host} is not responding. Please verify the IP address or enter a new one if it has changed.",
        "data": {
          "host": "IP address"
        },
        "data_description": {
          "host": "Current or updated IP address of your Marstek device"
        }
      },
      "reconfigure_confirm": {
        "title": "Reconfigure Marstek Device",
        "description": "Update the connection settings for the device at {host}.",
        "data": {
          "host": "IP address",
          "port": "Port"
        },
        "data_description": {
          "host": "Updated IP address of your Marstek device",
          "port": "UDP port (default: 30000)"
        }
      }
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "Marstek Options",
        "description": "Configure device polling and power settings.",
        "sections": {
          "polling_settings": {
            "name": "Polling Intervals",
            "description": "How often to poll the device for different types of data",
            "data": {
              "poll_interval_fast": "Fast polling interval",
              "poll_interval_medium": "Medium polling interval",
              "poll_interval_slow": "Slow polling interval"
            },
            "data_description": {
              "poll_interval_fast": "Battery & power data (ES.GetMode, ES.GetStatus, EM.GetStatus)",
              "poll_interval_medium": "Solar/PV data",
              "poll_interval_slow": "WiFi signal and battery temperature"
            }
          },
          "network_settings": {
            "name": "Network Settings",
            "description": "Request timing and error handling",
            "data": {
              "request_delay": "Delay between requests",
              "request_timeout": "Request timeout",
              "failure_threshold": "Failures before unavailable"
            },
            "data_description": {
              "request_delay": "Delay between consecutive API requests for device stability",
              "request_timeout": "How long to wait for a response before timing out",
              "failure_threshold": "Number of consecutive failures before entities become unavailable"
            }
          },
          "power_settings": {
            "name": "Power Settings",
            "description": "Default power values for device actions",
            "data": {
              "action_charge_power": "Default charge power",
              "action_discharge_power": "Default discharge power",
              "socket_limit": "Enforce 800 W socket limit"
            },
            "data_description": {
              "action_charge_power": "Default power for charge actions (negative value)",
              "action_discharge_power": "Default power for discharge actions (positive value)",
              "socket_limit": "Limit charge/discharge to 800 W for plug socket safety"
            }
          }
        }
      }
    }
  },
  "entity": {
    "sensor": {
      "battery_level": {
        "name": "Battery level"
      },
      "battery_power": {
        "name": "Battery power"
      },
      "grid_power": {
        "name": "Grid power"
      },
      "offgrid_power": {
        "name": "Off-grid power"
      },
      "pv_power": {
        "name": "PV power"
      },
      "battery_total_capacity": {
        "name": "Battery total capacity"
      },
      "device_mode": {
        "name": "Device mode",
        "state": {
          "auto": "Auto",
          "ai": "AI",
          "manual": "Manual",
          "passive": "Passive"
        }
      },
      "battery_status": {
        "name": "Battery status",
        "state": {
          "charging": "Charging",
          "discharging": "Discharging",
          "idle": "Idle"
        }
      },
      "wifi_rssi": {
        "name": "WiFi signal strength"
      },
      "wifi_ip_address": {
        "name": "Wi-Fi IP address"
      },
      "wifi_gateway": {
        "name": "Wi-Fi gateway"
      },
      "wifi_subnet_mask": {
        "name": "Wi-Fi subnet mask"
      },
      "wifi_dns": {
        "name": "Wi-Fi DNS"
      },
      "battery_temperature": {
        "name": "Battery temperature"
      },
      "battery_remaining_capacity": {
        "name": "Battery remaining capacity"
      },
      "battery_rated_capacity": {
        "name": "Battery rated capacity"
      },
      "grid_total_power": {
        "name": "Grid total power"
      },
      "phase_a_power": {
        "name": "Phase A power"
      },
      "phase_b_power": {
        "name": "Phase B power"
      },
      "phase_c_power": {
        "name": "Phase C power"
      },
      "total_pv_energy": {
        "name": "Total solar energy"
      },
      "total_grid_output_energy": {
        "name": "Total grid export"
      },
      "total_grid_input_energy": {
        "name": "Total grid import"
      },
      "total_load_energy": {
        "name": "Total load energy"
      },
      "device_ip": {
        "name": "Device IP"
      },
      "device_version": {
        "name": "Device version"
      },
      "wifi_name": {
        "name": "Wi-Fi name"
      },
      "ble_mac": {
        "name": "BLE MAC"
      },
      "wifi_mac": {
        "name": "Wi-Fi MAC"
      },
      "mac": {
        "name": "MAC address"
      },
      "pv1_power": {
        "name": "PV1 power"
      },
      "pv1_voltage": {
        "name": "PV1 voltage"
      },
      "pv1_current": {
        "name": "PV1 current"
      },
      "pv1_state": {
        "name": "PV1 state"
      },
      "pv2_power": {
        "name": "PV2 power"
      },
      "pv2_voltage": {
        "name": "PV2 voltage"
      },
      "pv2_current": {
        "name": "PV2 current"
      },
      "pv2_state": {
        "name": "PV2 state"
      },
      "pv3_power": {
        "name": "PV3 power"
      },
      "pv3_voltage": {
        "name": "PV3 voltage"
      },
      "pv3_current": {
        "name": "PV3 current"
      },
      "pv3_state": {
        "name": "PV3 state"
      },
      "pv4_power": {
        "name": "PV4 power"
      },
      "pv4_voltage": {
        "name": "PV4 voltage"
      },
      "pv4_current": {
        "name": "PV4 current"
      },
      "pv4_state": {
        "name": "PV4 state"
      }
    },
    "select": {
      "operating_mode": {
        "name": "Operating mode",
        "state": {
          "auto": "Auto",
          "ai": "AI",
          "manual": "Manual",
          "passive": "Passive"
        }
      }
    },
    "binary_sensor": {
      "ct_connection": {
        "name": "CT connection",
        "state": {
          "on": "Connected",
          "off": "Not connected"
        }
      },
      "charge_permission": {
        "name": "Charge permission"
      },
      "discharge_permission": {
        "name": "Discharge permission"
      }
    }
  },
  "services": {
    "set_passive_mode": {
      "name": "Set passive mode",
      "description": "Set the device to passive mode with specified power and duration. Negative power charges the battery, positive power discharges.",
      "fields": {
        "device_id": {
          "name": "Device",
          "description": "The Marstek device to control"
        },
        "power": {
          "name": "Power",
          "description": "Target power in watts. Negative values charge the battery, positive values discharge."
        },
        "duration": {
          "name": "Duration",
          "description": "Duration in seconds for the passive mode operation."
        }
      }
    },
    "set_manual_schedule": {
      "name": "Set manual schedule",
      "description": "Configure a manual schedule slot for automatic charge/discharge operations.",
      "fields": {
        "device_id": {
          "name": "Device",
          "description": "The Marstek device to control"
        },
        "schedule_slot": {
          "name": "Schedule slot",
          "description": "Schedule slot number (0-9). Each slot can have independent settings."
        },
        "start_time": {
          "name": "Start time",
          "description": "Start time for the schedule"
        },
        "end_time": {
          "name": "End time",
          "description": "End time for the schedule"
        },
        "power": {
          "name": "Power",
          "description": "Target power in watts. Negative values charge the battery, positive values discharge."
        },
        "days": {
          "name": "Days",
          "description": "Days of the week when this schedule is active"
        },
        "enable": {
          "name": "Enable",
          "description": "Whether this schedule slot is enabled"
        }
      }
    },
    "clear_manual_schedules": {
      "name": "Clear manual schedules",
      "description": "Clear all manual schedule slots on the device.",
      "fields": {
        "device_id": {
          "name": "Device",
          "description": "The Marstek device to clear schedules from"
        }
      }
    },
    "set_manual_schedules": {
      "name": "Set multiple manual schedules",
      "description": "Configure multiple manual mode schedules using YAML for the selected battery.",
      "fields": {
        "device_id": {
          "name": "Device",
          "description": "The Marstek device to control"
        },
        "schedules": {
          "name": "Schedules",
          "description": "List of schedules to configure. Each item must include schedule_slot, start_time, end_time, and optionally days, power, and enable."
        }
      }
    },
    "request_data_sync": {
      "name": "Request data sync",
      "description": "Trigger an immediate data refresh from the Marstek device.",
      "fields": {
        "device_id": {
          "name": "Device",
          "description": "The Marstek device to refresh. When omitted, all devices are refreshed."
        }
      }
    }
  },
  "exceptions": {
    "no_device_specified": {
      "message": "No device specified. Please select a device."
    },
    "invalid_device": {
      "message": "Device {device_id} not found"
    },
    "no_config_entry": {
      "message": "No loaded Marstek config entry found for device: {device_id}"
    },
    "invalid_mode": {
      "message": "Invalid operating mode: {mode}"
    },
    "no_host_configured": {
      "message": "Device IP address not configured"
    },
    "mode_change_failed": {
      "message": "Failed to set operating mode to {mode}: {error}"
    },
    "command_failed": {
      "message": "Failed to send command: {error}"
    },
    "invalid_time_range": {
      "message": "End time must be after start time (start: {start}, end: {end})."
    },
    "power_out_of_range": {
      "message": "Requested power {requested} W is outside the supported range ({min} W to {max} W) for this device."
    },
    "passive_mode_requires_service": {
      "message": "Passive mode requires power and duration parameters. Use the 'Set passive mode' service (marstek.set_passive_mode) in Developer Tools > Services or in an automation."
    },
    "manual_mode_requires_service": {
      "message": "Manual mode requires schedule configuration. Use the 'Set manual schedule' service (marstek.set_manual_schedule) in Developer Tools > Services or in an automation."
    }
  },
  "issues": {
    "cannot_connect": {
      "title": "Marstek device not reachable",
      "fix_flow": {
        "step": {
          "init": {
            "title": "Update device connection",
            "description": "The device at {host} is not responding. Update the connection settings if the IP has changed.",
            "data": {
              "host": "IP address",
              "port": "Port"
            },
            "data_description": {
              "host": "IP address of your Marstek device",
              "port": "UDP port (default: 30000)"
            }
          }
        },
        "error": {
          "cannot_connect": "Unable to connect to the device",
          "invalid_discovery_info": "Invalid discovery information received from the device",
          "unique_id_mismatch": "The device at this address is a different device"
        },
        "abort": {
          "entry_not_found": "The configuration entry was not found.",
          "missing_config": "Missing configuration data for this repair."
        }
      }
    }
  }
}
